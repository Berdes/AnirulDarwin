syntax = "proto3";

package proto;

// Vector 3 this store position or other 3 float values.
// Next: 4
message Vector3 {
    float x = 1;
    float y = 2;
    float z = 3;
}

// Vector 4 this is representing a quaternion (rotation).
message Vector4 {
    float x = 1;
    float y = 2;
    float z = 3;
    float w = 4;
}

// Physical property of the element.
// Next: 6
message Physic {
    // Sphere radius.
    float radius = 1;
    // weight total.
    float total_weight = 2;
    // Sphere position.
    Vector3 position = 3;
    // Sphere look direction.
    Vector3 direction = 4;
    // Velocity the speed it has dx/dt.
    Vector3 speed = 5;
    // Rotation dp/dt.
    Vector4 rotation = 6;
}

// Sphere element in the world.
// Next: 5
message Element {
    string element_name = 1;
    // Material string.
    string material = 2;
    // Physic, position, speed etc...
    Physic physic = 3;
    // What type of element is it?
    enum TypeEnum {
        UKNOWN = 0;     // Unknown ???
        GROUND = 1;     // From where the gravity is generated.
        EXPLOSION = 2;  // Explosion that push stuff around.
        UPGRADE = 3;    // Upgrade to upgrade players.
        GREEN = 4;      // Greenery (no effect on anything).
        BROWN = 5;      // Tree bark and non destructible elements.
        WATER = 6;      // Water.
    }
    TypeEnum type_enum = 4;
}

// Player will be (for now) be represented by spheres.
// Next: 4
message Player {
    // Player name.
    string user_name = 1;
    // Material string.
    string material = 2;
    // Physic paramters.
    Physic physic = 3;
}

// UpdateRequest
// Next: 3
message UpdateRequest {
    Player player = 1;
    Element element = 2;
}

// UpdateResponse
// Next: 5
message UpdateResponse {
    repeated Player players = 1;
    repeated Element elements = 2;
    double time = 3;
    Vector3 local_g = 4;
}

// The darwin service.
service DarwinService {
    rpc Update(UpdateRequest) returns (stream UpdateResponse);
}
